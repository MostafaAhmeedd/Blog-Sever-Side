<!DOCTYPE html>
<html>
<head>

    <title>My Blog</title>
    <!-- Include Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script>
        function redirectToRoute(route) {
    window.location.href = route;
}
      </script>
    <div class="container mt-4">
        <!-- Logout Button -->
        <button type="button" class="btn btn-danger mt-3" onclick="redirectToRoute('/user/logout')">Logout</button></div>
</head>
<body>
    <div class="container mt-4">
        <!-- Header/Blog Title -->
        <div class="header bg-white p-4 text-center">
            <h1 class="display-4">My Blog</h1>
        </div>

        <!-- Button to Add New Post -->
        <button type="button" class="btn btn-primary mt-3" data-toggle="modal" data-target="#addPostModal">Add Post</button>

        <!-- Space for Posts -->
        <div class="my-4"></div>

        <!-- Article 1 -->
        <% posts.forEach(item=> { %>
        <div class="card mb-4">
            <div class="card-body">
                <h2 class="card-title"><%= item.user.firstName %><%= item.user.lastName %> </h2>
                <button type="submit" class="signup" onclick="redirectToRoute('/user/view-single-post/<%= item.id %>')">View Details</button>
            </div>
        </div>
        <% }); %>
        
        <ul class="pagination justify-content-center mt-4">
            <% if (totalpages >= 0) { %>
                <% for (let i = 0; i < totalpages; i++) { %>
                    <li class="page-item <%= page === i ? 'active' : '' %>">
                        <a class="page-link" href="/user/viewposts?page=<%= i %>&size=<%= size %>"><%= i+1 %></a>
                    </li>
                <% } %>
            <% } %>
        </ul>

        <!-- Modal for Adding New Post -->
        <div class="modal fade" id="addPostModal" tabindex="-1" role="dialog" aria-labelledby="addPostModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addPostModalLabel">Add New Post</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                            <form method="POST" action="/user/addpost" id="postForm" enctype="multipart/form-data">
                                <div class="form-group">
                                    <div>
                                    <label for="postTitle">Title</label>
                                    <input type="text" class="form-control" id="postTitle" name="title" placeholder="Enter title">
                                </div>
                                <div>
                                    <label for="postDescription">Description</label>
                                    <input type="text" placeholder="Enter Description" name="content" required>
                                </div>
                                <div>
                                    <label for="postImage">Image</label>
                                    <input type="file" class="form-control-file" id="postImage" name="image">
                                </div>

                                <div class="clearfix">
                                    <button type="submit" class="signup">Add Post</button>

                                </div>
                               </div>
                                <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> -->
                            </form>
                    <!-- </div>
                    <div class="modal-footer">


                    </div> -->
                </div>
            </div>
        </div>
    </div>

    <!-- Include Bootstrap JS (if needed) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
